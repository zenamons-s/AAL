# –û—Ç—á—ë—Ç: –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –¥–ª—è PathFinder

## –ü—Ä–æ–±–ª–µ–º–∞

PathFinder –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–≤—è–∑–Ω—ã–π –≥—Ä–∞—Ñ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ —Ä—ë–±—Ä–∞–º–∏ –∏–∑-–∑–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–ª—é—á–µ–π –º–µ–∂–¥—É `nodesMap` –∏ `edgesMap`:

- **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–µ–π**: `stopId` –≤ `edgesMap` –Ω–µ –≤—Å–µ–≥–¥–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –≤ `nodesMap`
- **–†—ë–±—Ä–∞ –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É–∑–ª–æ–≤**: –†—ë–±—Ä–∞ —Å—Å—ã–ª–∞–ª–∏—Å—å –Ω–∞ —É–∑–ª—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –≥—Ä–∞—Ñ–µ
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**: –ì—Ä–∞—Ñ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: –ù–µ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- PathFinder –ø–æ–ª—É—á–∞–ª `undefined` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `edges.get(stopId)`
- –û—à–∏–±–∫–∞ "–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —É–∑–µ–ª —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º. –û—Å—Ç–∞–ª–æ—Å—å –Ω–µ–ø–æ—Å–µ—â—ë–Ω–Ω—ã—Ö: 36"
- –ú–∞—Ä—à—Ä—É—Ç—ã –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –¥–∞–∂–µ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—É—Ç–∏ –≤ –≥—Ä–∞—Ñ–µ

## –†–µ—à–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **–ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∞**, –∫–æ—Ç–æ—Ä–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:

1. **–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª—é—á–µ–π**: –í—Å–µ –∫–ª—é—á–∏ –≤ `edgesMap` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `nodesMap`
2. **–í–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ä—ë–±–µ—Ä**: –í—Å–µ —Ä—ë–±—Ä–∞ –≤–µ–¥—É—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–∑–ª—ã
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º**: –ì—Ä–∞—Ñ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º**: –ì—Ä–∞—Ñ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `synchronizeGraph()` –≤ RouteGraph

**–§–∞–π–ª:** `backend/src/application/route-builder/RouteGraph.ts`

**–ú–µ—Ç–æ–¥:** `synchronizeGraph()`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Ä—ë–±—Ä–∞ –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É–∑–ª–æ–≤
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã –¥–ª—è –≤—Å–µ—Ö —É–∑–ª–æ–≤ –±–µ–∑ —Ä—ë–±–µ—Ä
- –£–¥–∞–ª—è–µ—Ç —Ä—ë–±—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤–µ–¥—É—Ç –≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–∑–ª—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤—Å–µ –∫–ª—é—á–∏ –≤ `edgesMap` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `nodesMap`
- –£–¥–∞–ª—è–µ—Ç —Å–∏—Ä–æ—Ç—Å–∫–∏–µ –∫–ª—é—á–∏ –∏–∑ `edgesMap`

**–ö–æ–¥:**
```typescript
synchronizeGraph(): { removedEdges: number; fixedEdges: number; initializedNodes: number } {
  // –®–∞–≥ 1: –£–¥–∞–ª—è–µ–º –≤—Å–µ —Ä—ë–±—Ä–∞ –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É–∑–ª–æ–≤
  // –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã –¥–ª—è –≤—Å–µ—Ö —É–∑–ª–æ–≤ –±–µ–∑ —Ä—ë–±–µ—Ä
  // –®–∞–≥ 3: –£–¥–∞–ª—è–µ–º —Ä—ë–±—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤–µ–¥—É—Ç –≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–∑–ª—ã
  // –®–∞–≥ 4: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –≤—Å–µ –∫–ª—é—á–∏ –≤ edgesMap –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ nodesMap
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –∫–ª—é—á–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç
  return { removedEdges, fixedEdges, initializedNodes };
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –í—Å–µ –∫–ª—é—á–∏ –≤ `edgesMap` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `nodesMap`
- ‚úÖ –í—Å–µ —É–∑–ª—ã –∏–º–µ—é—Ç –∑–∞–ø–∏—Å—å –≤ `edgesMap` (–¥–∞–∂–µ –ø—É—Å—Ç—É—é)
- ‚úÖ –í—Å–µ —Ä—ë–±—Ä–∞ –≤–µ–¥—É—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–∑–ª—ã
- ‚úÖ –ù–µ—Ç —Å–∏—Ä–æ—Ç—Å–∫–∏—Ö –∫–ª—é—á–µ–π –≤ `edgesMap`

### 2. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `validateGraph()` –≤ RouteGraph

**–§–∞–π–ª:** `backend/src/application/route-builder/RouteGraph.ts`

**–ú–µ—Ç–æ–¥:** `validateGraph()`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª—é—á–µ–π –º–µ–∂–¥—É `nodesMap` –∏ `edgesMap`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —É–∑–ª–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è —Ä—ë–±—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑–Ω–æ—Å—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

**–ö–æ–¥:**
```typescript
validateGraph(): { isValid: boolean; errors: string[]; warnings: string[] } {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –í—Å–µ –∫–ª—é—á–∏ –≤ edgesMap –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ nodesMap
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –í—Å–µ —É–∑–ª—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∑–∞–ø–∏—Å—å –≤ edgesMap (–¥–∞–∂–µ –ø—É—Å—Ç—É—é)
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –í—Å–µ —Ä—ë–±—Ä–∞ –¥–æ–ª–∂–Ω—ã –≤–µ—Å—Ç–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–∑–ª—ã
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –°–≤—è–∑–Ω–æ—Å—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤
  return { isValid, errors, warnings };
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∞
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤

### 3. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `logFullConnectivityTable()` –≤ RouteGraph

**–§–∞–π–ª:** `backend/src/application/route-builder/RouteGraph.ts`

**–ú–µ—Ç–æ–¥:** `logFullConnectivityTable()`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –í—ã–≤–æ–¥–∏—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞: `stopId`, –º–∞—Å—Å–∏–≤ —Å–æ—Å–µ–¥–µ–π, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ—Å–µ–¥–µ–π
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Ä—ë–±–µ—Ä
- –í—ã–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä—ë–±–µ—Ä (–≤–∏—Ä—Ç ‚Üí –≤–∏—Ä—Ç, –≤–∏—Ä—Ç ‚Üí —Ä–µ–∞–ª, —Ä–µ–∞–ª ‚Üí –≤–∏—Ä—Ç, —Ä–µ–∞–ª ‚Üí —Ä–µ–∞–ª)

**–ö–æ–¥:**
```typescript
logFullConnectivityTable(): void {
  // –î–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –≤—ã–≤–æ–¥–∏–º:
  // - stopId
  // - –ú–∞—Å—Å–∏–≤ —Å–æ—Å–µ–¥–µ–π
  // - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ—Å–µ–¥–µ–π
  // - –°–ø–∏—Å–æ–∫ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Ä—ë–±–µ—Ä
  // –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—ë–±–µ—Ä
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∞
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞
- ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—ë–±–µ—Ä

### 4. –£–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `addEdge()` –≤ RouteGraph

**–§–∞–π–ª:** `backend/src/application/route-builder/RouteGraph.ts`

**–ú–µ—Ç–æ–¥:** `addEdge()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —É–∑–ª–æ–≤ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ä—ë–±–µ—Ä
- –†—ë–±—Ä–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è, –µ—Å–ª–∏ —É–∑–ª—ã –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

**–ö–æ–¥:**
```typescript
addEdge(edge: IRouteEdge): void {
  // –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ–±–∞ —É–∑–ª–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ nodes Map
  if (!this.nodes.has(edge.fromStopId)) {
    console.log(`[RouteGraph.addEdge] ‚ùå –û–®–ò–ë–ö–ê: –£–∑–µ–ª fromStopId="${edge.fromStopId}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –≥—Ä–∞—Ñ–µ! –†–µ–±—Ä–æ –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω–æ.`);
    return; // –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ–±—Ä–æ, –µ—Å–ª–∏ —É–∑–µ–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  }
  
  if (!this.nodes.has(edge.toStopId)) {
    console.log(`[RouteGraph.addEdge] ‚ùå –û–®–ò–ë–ö–ê: –£–∑–µ–ª toStopId="${edge.toStopId}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –≥—Ä–∞—Ñ–µ! –†–µ–±—Ä–æ –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω–æ.`);
    return; // –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ–±—Ä–æ, –µ—Å–ª–∏ —É–∑–µ–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  }
  
  // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–±—Ä–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–±–∞ —É–∑–ª–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –†—ë–±—Ä–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É–∑–ª–æ–≤
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–ª—é—á–µ–π –Ω–∞ —ç—Ç–∞–ø–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

### 5. –£–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `addNode()` –≤ RouteGraph

**–§–∞–π–ª:** `backend/src/application/route-builder/RouteGraph.ts`

**–ú–µ—Ç–æ–¥:** `addNode()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ —Ä—ë–±–µ—Ä –¥–ª—è –Ω–æ–≤–æ–≥–æ —É–∑–ª–∞
- –ì–∞—Ä–∞–Ω—Ç–∏—è, —á—Ç–æ `edgesMap` –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –∑–∞–ø–∏—Å—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞

**–ö–æ–¥:**
```typescript
addNode(node: IRouteNode): void {
  this.nodes.set(node.stopId, node);
  // –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ —Ä—ë–±–µ—Ä –¥–ª—è –Ω–æ–≤–æ–≥–æ —É–∑–ª–∞
  if (!this.edges.has(node.stopId)) {
    this.edges.set(node.stopId, []);
  }
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –ö–∞–∂–¥—ã–π —É–∑–µ–ª –∏–º–µ–µ—Ç –∑–∞–ø–∏—Å—å –≤ `edgesMap` (–¥–∞–∂–µ –ø—É—Å—Ç—É—é)
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–ª—é—á–µ–π –≤ `edgesMap`

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ RouteGraphManager

**–§–∞–π–ª:** `backend/src/application/route-builder/RouteGraphManager.ts`

**–ú–µ—Ç–æ–¥—ã:** `doInitialize()`, `updateGraph()`, `getGraph()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º –≥—Ä–∞—Ñ–∞

**–ö–æ–¥:**
```typescript
// –í doInitialize():
// –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è
const syncResult = this.graph.synchronizeGraph();
// –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –í–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
const validationResult = this.graph.validateGraph();
if (!validationResult.isValid) {
  // –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
  this.graph.synchronizeGraph();
  // –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
}
// –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
this.graph.logFullConnectivityTable();

// –í getGraph():
// –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º
const syncResult = this.graph.synchronizeGraph();
const validationResult = this.graph.validateGraph();
if (!validationResult.isValid) {
  // –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  this.graph.synchronizeGraph();
  const revalidationResult = this.graph.validateGraph();
  if (!revalidationResult.isValid) {
    throw new Error(`Graph validation failed before returning: ${revalidationResult.errors.join(', ')}`);
  }
}
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –ì—Ä–∞—Ñ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è
- ‚úÖ –ì—Ä–∞—Ñ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ì—Ä–∞—Ñ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ BuildRouteUseCase

**–§–∞–π–ª:** `backend/src/application/route-builder/BuildRouteUseCase.ts`

**–ú–µ—Ç–æ–¥:** `executeWithAdaptiveLoading()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–ö–æ–¥:**
```typescript
// –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
console.log(`[BuildRouteUseCase] üîÑ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder...`);
const syncResult = graph.synchronizeGraph();
if (syncResult.removedEdges > 0 || syncResult.fixedEdges > 0) {
  console.log(`[BuildRouteUseCase] ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: —É–¥–∞–ª–µ–Ω–æ —Ä—ë–±–µ—Ä=${syncResult.removedEdges}, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ=${syncResult.fixedEdges}`);
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
const validationResult = graph.validateGraph();
if (!validationResult.isValid) {
  // –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  graph.synchronizeGraph();
  const revalidationResult = graph.validateGraph();
  if (!revalidationResult.isValid) {
    throw new Error(`Graph validation failed before PathFinder: ${revalidationResult.errors.join(', ')}`);
  }
}

// –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
graph.logFullConnectivityTable();
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –ì—Ä–∞—Ñ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
- ‚úÖ –ì—Ä–∞—Ñ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ PathFinder –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç –≥—Ä–∞—Ñ–∞, —á—Ç–æ –±—ã–ª –ø–æ—Å—Ç—Ä–æ–µ–Ω –≤ RouteGraphManager

## –ì–∞—Ä–∞–Ω—Ç–∏–∏ —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª—é—á–µ–π –º–µ–∂–¥—É nodesMap –∏ edgesMap

- –í—Å–µ –∫–ª—é—á–∏ –≤ `edgesMap` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `nodesMap`
- –í—Å–µ —É–∑–ª—ã –∏–º–µ—é—Ç –∑–∞–ø–∏—Å—å –≤ `edgesMap` (–¥–∞–∂–µ –ø—É—Å—Ç—É—é)
- –ù–µ—Ç —Å–∏—Ä–æ—Ç—Å–∫–∏—Ö –∫–ª—é—á–µ–π –≤ `edgesMap`

### ‚úÖ –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å –≤—Å–µ—Ö —Ä—ë–±–µ—Ä

- –í—Å–µ —Ä—ë–±—Ä–∞ –≤–µ–¥—É—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–∑–ª—ã
- –í—Å–µ —Ä—ë–±—Ä–∞ –∏–º–µ—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏—Å—Ö–æ–¥–Ω—ã–µ —É–∑–ª—ã
- –†—ë–±—Ä–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É–∑–ª–æ–≤

### ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º –≥—Ä–∞—Ñ–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º –≥—Ä–∞—Ñ–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### ‚úÖ PathFinder –ø–æ–ª—É—á–∞–µ—Ç –µ–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç –≥—Ä–∞—Ñ–∞

- PathFinder —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–æ–º –∂–µ –æ–±—ä–µ–∫—Ç–µ –≥—Ä–∞—Ñ–∞, —á—Ç–æ –±—ã–ª –ø–æ—Å—Ç—Ä–æ–µ–Ω –≤ RouteGraphManager
- –ì—Ä–∞—Ñ –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ BuildRouteUseCase
- –ì—Ä–∞—Ñ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder

### ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—ë–±–µ—Ä (–≤–∏—Ä—Ç ‚Üí –≤–∏—Ä—Ç, –≤–∏—Ä—Ç ‚Üí —Ä–µ–∞–ª, —Ä–µ–∞–ª ‚Üí –≤–∏—Ä—Ç, —Ä–µ–∞–ª ‚Üí —Ä–µ–∞–ª)
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä—ã –ø–∞—Ä –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–Ø–∫—É—Ç—Å–∫ ‚Üí –û–ª—ë–∫–º–∏–Ω—Å–∫**: –†–µ–∞–ª—å–Ω—ã–π ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π
2. **–õ–µ–Ω—Å–∫ ‚Üí –Ø–∫—É—Ç—Å–∫**: –†–µ–∞–ª—å–Ω—ã–π ‚Üí –†–µ–∞–ª—å–Ω—ã–π
3. **–í–µ—Ä—Ö–æ—è–Ω—Å–∫ ‚Üí –ñ–∏–≥–∞–Ω—Å–∫**: –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π
4. **–ê–º–≥–∞ ‚Üí –¢–∏–∫—Å–∏**: –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π
5. **–ú–∏—Ä–Ω—ã–π ‚Üí –û–ª—ë–∫–º–∏–Ω—Å–∫**: –†–µ–∞–ª—å–Ω—ã–π ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π

### –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:

```
[RouteGraphManager] üîÑ –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∏–∑ –æ—á–∏—â–µ–Ω–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞...
[RouteGraphManager] –ì—Ä–∞—Ñ –ø–æ—Å—Ç—Ä–æ–µ–Ω: —É–∑–ª–æ–≤=N, —Ä—ë–±–µ—Ä=M
[RouteGraphManager] üîÑ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è...
[RouteGraph.synchronizeGraph] üîÑ –ù–∞—á–∞–ª–æ –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∞...
[RouteGraph.synchronizeGraph] –£–∑–ª–æ–≤ –≤ nodesMap: N
[RouteGraph.synchronizeGraph] –ö–ª—é—á–µ–π –≤ edgesMap: M
[RouteGraph.synchronizeGraph] ‚úÖ –í—Å–µ –∫–ª—é—á–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç: nodesMap –∏ edgesMap —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
[RouteGraphManager] ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: —É–¥–∞–ª–µ–Ω–æ —Ä—ë–±–µ—Ä=0, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ=0, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —É–∑–ª–æ–≤=0
[RouteGraphManager] üîç –í–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏...
[RouteGraph.validateGraph] üîç –ù–∞—á–∞–ª–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∞...
[RouteGraph.validateGraph] ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞:
[RouteGraph.validateGraph]   - –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å: ‚úÖ –î–ê
[RouteGraph.validateGraph]   - –û—à–∏–±–æ–∫: 0
[RouteGraph.validateGraph]   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: 0
[RouteGraphManager] ‚úÖ –ì—Ä–∞—Ñ –ø—Ä–æ—à—ë–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é
[RouteGraphManager] üìä –í—ã–≤–æ–¥ –ø–æ–ª–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∞...
[RouteGraph.logFullConnectivityTable] üìä –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∞:
[RouteGraph.logFullConnectivityTable] –í—Å–µ–≥–æ —É–∑–ª–æ–≤: N
[RouteGraph.logFullConnectivityTable] –†–µ–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤: R
[RouteGraph.logFullConnectivityTable] –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤: V
[RouteGraph.logFullConnectivityTable] üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—ë–±–µ—Ä:
[RouteGraph.logFullConnectivityTable]   - –í—Å–µ–≥–æ —Ä—ë–±–µ—Ä: M
[RouteGraph.logFullConnectivityTable]   - –í–∏—Ä—Ç ‚Üí –í–∏—Ä—Ç: VV
[RouteGraph.logFullConnectivityTable]   - –í–∏—Ä—Ç ‚Üí –†–µ–∞–ª: VR
[RouteGraph.logFullConnectivityTable]   - –†–µ–∞–ª ‚Üí –í–∏—Ä—Ç: RV
[RouteGraph.logFullConnectivityTable]   - –†–µ–∞–ª ‚Üí –†–µ–∞–ª: RR
[BuildRouteUseCase] üîÑ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder...
[BuildRouteUseCase] ‚úÖ –ì—Ä–∞—Ñ –ø—Ä–æ—à—ë–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
[BuildRouteUseCase] üìä –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ PathFinder:
[PathFinder] üîç –ü–æ–∏—Å–∫ –ø—É—Ç–∏: fromStopId="..." -> toStopId="..."
[PathFinder] ‚úÖ –£–∑–ª—ã –Ω–∞–π–¥–µ–Ω—ã: fromNode="–Ø–∫—É—Ç—Å–∫" (—Ä–µ–∞–ª—å–Ω—ã–π), toNode="–û–ª—ë–∫–º–∏–Ω—Å–∫" (–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π)
[PathFinder] –†—ë–±–µ—Ä –∏–∑ fromStopId: ‚â•M, –∏–∑ toStopId: ‚â•N
[PathFinder] ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ "..." (...): Infinity -> X (—á–µ—Ä–µ–∑ "...")
[PathFinder] –¶–µ–ª–µ–≤–æ–π —É–∑–µ–ª –Ω–∞–π–¥–µ–Ω! –ò—Ç–µ—Ä–∞—Ü–∏–π: N, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ: M
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:

- ‚úÖ `synchronizeGraph()` –Ω–µ —É–¥–∞–ª—è–µ—Ç —Ä—ë–±–µ—Ä (removedEdges = 0)
- ‚úÖ `validateGraph()` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–æ–∫ (errors.length = 0)
- ‚úÖ –í—Å–µ –∫–ª—é—á–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç: nodesMap –∏ edgesMap —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ PathFinder –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "—Ä—ë–±–µ—Ä –∏–∑ fromStopId: ‚â•M" –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤
- ‚úÖ PathFinder –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "—Ä—ë–±–µ—Ä –∏–∑ fromStopId: ‚â•N" –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤
- ‚úÖ "–æ—Å—Ç–∞–ª–æ—Å—å –Ω–µ–ø–æ—Å–µ—â—ë–Ω–Ω—ã—Ö" —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
- ‚úÖ –î–æ—Å—Ç–∏–∂–∏–º—ã–µ —É–∑–ª—ã > 20
- ‚úÖ –î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–æ —Ü–µ–ª–µ–≤–æ–≥–æ ‚â† Infinity
- ‚úÖ –ü—É—Ç—å —Å—Ç—Ä–æ–∏—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —É–∑–ª—ã
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –≥–æ—Ä–æ–¥–æ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:

- ‚úÖ **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª—é—á–µ–π**: –í—Å–µ –∫–ª—é—á–∏ –≤ `edgesMap` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `nodesMap`
- ‚úÖ **–í–∞–ª–∏–¥–Ω–æ—Å—Ç—å –≤—Å–µ—Ö —Ä—ë–±–µ—Ä**: –í—Å–µ —Ä—ë–±—Ä–∞ –≤–µ–¥—É—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–∑–ª—ã
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ì—Ä–∞—Ñ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º**: –ì—Ä–∞—Ñ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
- ‚úÖ **PathFinder –ø–æ–ª—É—á–∞–µ—Ç –µ–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç –≥—Ä–∞—Ñ–∞**: –ì—Ä–∞—Ñ –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. `backend/src/application/route-builder/RouteGraph.ts`:
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `synchronizeGraph()` –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∞
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `validateGraph()` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∞
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `logFullConnectivityTable()` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤—è–∑–Ω–æ—Å—Ç–∏
   - –£–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `addEdge()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —É–∑–ª–æ–≤
   - –£–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `addNode()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä—ë–±–µ—Ä

2. `backend/src/application/route-builder/RouteGraphManager.ts`:
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º –≥—Ä–∞—Ñ–∞
   - –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–≤–æ–¥ –ø–æ–ª–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

3. `backend/src/application/route-builder/BuildRouteUseCase.ts`:
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ PathFinder
   - –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–≤–æ–¥ –ø–æ–ª–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

‚úÖ **PathFinder –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:**
- "—Ä—ë–±–µ—Ä –∏–∑ fromStopId: ‚â•M" –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤ (–≥–¥–µ M = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –æ—Å—Ç–∞–Ω–æ–≤–æ–∫)
- "—Ä—ë–±–µ—Ä –∏–∑ fromStopId: ‚â•N" –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤ (–≥–¥–µ N = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Å—Ç–∞–Ω–æ–≤–æ–∫)
- "–æ—Å—Ç–∞–ª–æ—Å—å –Ω–µ–ø–æ—Å–µ—â—ë–Ω–Ω—ã—Ö" –¥–æ–ª–∂–Ω–æ —É–º–µ–Ω—å—à–∞—Ç—å—Å—è
- –î–æ—Å—Ç–∏–∂–∏–º—ã–µ —É–∑–ª—ã > 20
- –î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–æ —Ü–µ–ª–µ–≤–æ–≥–æ ‚â† Infinity
- –ü—É—Ç—å —Å—Ç—Ä–æ–∏—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —É–∑–ª—ã

‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:**
- –£–¥–∞–ª–µ–Ω–æ —Ä—ë–±–µ—Ä: 0 (–∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: 0 (–∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- –í—Å–µ –∫–ª—é—á–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç: nodesMap –∏ edgesMap —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:**
- –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å: ‚úÖ –î–ê
- –û—à–∏–±–æ–∫: 0
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: 0 (–∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)

‚úÖ **–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞—Ç–æ–π –∏ –±–µ–∑ –¥–∞—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –≥–æ—Ä–æ–¥–æ–≤:**
- –†–µ–∞–ª—å–Ω—ã–π ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π ‚Üí –†–µ–∞–ª—å–Ω—ã–π
- –†–µ–∞–ª—å–Ω—ã–π ‚Üí –†–µ–∞–ª—å–Ω—ã–π (—á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —É–∑–ª—ã)
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π

‚úÖ **–ú–∞—Ä—à—Ä—É—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–±–æ–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö (A ‚Üí B –∏ B ‚Üí A)**

‚úÖ **PathFinder –ø–æ–ª—É—á–∞–µ—Ç –µ–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç –≥—Ä–∞—Ñ–∞, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –ø–æ—Å—Ç—Ä–æ–µ–Ω –≤ RouteGraphManager**


