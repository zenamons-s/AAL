# –†–µ–∑—é–º–µ: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìã –û–±–∑–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

1. **`adaptive-data-loader-architecture.md`** (91 KB, 2261 —Å—Ç—Ä–æ–∫)
   - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã
   - –í—Å–µ —Å–ª–æ–∏ Clean Architecture
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Å—É—â–Ω–æ—Å—Ç–∏, –∞–ª–≥–æ—Ä–∏—Ç–º—ã
   - 15 —Ä–∞–∑–¥–µ–ª–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
   - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –ø—Å–µ–≤–¥–æ–∫–æ–¥

2. **`adaptive-data-loader-diagrams.md`** (22 KB, 611 —Å—Ç—Ä–æ–∫)
   - 12 –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –¥–∏–∞–≥—Ä–∞–º–º (Mermaid)
   - High-level –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - Sequence diagrams
   - Class diagrams
   - State machines
   - Data flow diagrams
   - Deployment architecture

3. **`adaptive-data-loader-implementation-plan.md`** (33 KB, 820 —Å—Ç—Ä–æ–∫)
   - 10 —Ñ–∞–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
   - –î–µ—Ç–∞–ª—å–Ω—ã–µ —á–µ–∫–ª–∏—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
   - –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç: 19-30 –¥–Ω–µ–π
   - –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
   - –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è
   - –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∑–∞–¥–∞—á–∏

### 1. –ö–ª—é—á–µ–≤—ã–µ –±–ª–æ–∫–∏ —Å–∏—Å—Ç–µ–º—ã ‚úÖ

**Domain Layer:**
- `IDataLoader` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- `IDataRecoveryEngine` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `IDataQualityValidator` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- `IDataSourceStrategy` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- `TransportDataset` - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
- `DataQualityReport` - –æ—Ç—á—ë—Ç –æ –∫–∞—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö
- `DataSourceMode` - enum —Ä–µ–∂–∏–º–æ–≤ (REAL/RECOVERY/MOCK)

**Application Layer:**
- `AdaptiveDataLoader` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- `DataQualityValidator` - –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –ø–æ–ª–Ω–æ—Ç—ã
- `RecoveryEngine` - –¥–≤–∏–∂–æ–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `LoadTransportDataUseCase` - use case –∑–∞–≥—Ä—É–∑–∫–∏

**Infrastructure Layer:**
- `RealDataStrategy` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ OData
- `MockDataStrategy` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ JSON
- `CoordinateRecoveryService` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- `ScheduleRecoveryService` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- `TariffRecoveryService` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤
- `TransferRecoveryService` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Å–∞–¥–æ–∫

---

### 2. –†–æ–ª–∏ –º–æ–¥—É–ª–µ–π ‚úÖ

#### DataLoader (AdaptiveDataLoader)
**–†–æ–ª—å:** –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã
**–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:**
- –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö (OData –∏–ª–∏ Mock)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º (Redis)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã (REAL/RECOVERY/MOCK)
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏

#### RecoveryEngine
**–†–æ–ª—å:** –î–≤–∏–∂–æ–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
**–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:**
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö Recovery Services
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### Recovery Services
**–†–æ–ª—å:** –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
**CoordinateRecoveryService:**
- –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏
- –ü–∞—Ä—Å–∏–Ω–≥ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- Fallback –Ω–∞ —Ü–µ–Ω—Ç—Ä —Ä–µ–≥–∏–æ–Ω–∞

**ScheduleRecoveryService:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ —à–∞–±–ª–æ–Ω–∞–º
- –£—á—ë—Ç —Ç–∏–ø–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –∏ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏
- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–π—Å–æ–≤ –Ω–∞ 30 –¥–Ω–µ–π –≤–ø–µ—Ä—ë–¥

**TariffRecoveryService:**
- –†–∞—Å—á—ë—Ç —Ç–∞—Ä–∏—Ñ–æ–≤ –ø–æ —Ñ–æ—Ä–º—É–ª–µ (base + distance √ó rate)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–æ–≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –£—á—ë—Ç —Ç–∏–ø–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

**TransferRecoveryService:**
- –ê–Ω–∞–ª–∏–∑ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ–±—â–∏—Ö –æ—Å—Ç–∞–Ω–æ–≤–æ–∫
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä—ë–±–µ—Ä –ø–µ—Ä–µ—Å–∞–¥–æ–∫

#### MockEngine (MockDataStrategy)
**–†–æ–ª—å:** –†–µ–∑–µ—Ä–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
**–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö JSON –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ `TransportDataset`
- –ì–∞—Ä–∞–Ω—Ç–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ OData

#### RouteGraphBuilder
**–†–æ–ª—å:** –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –≥—Ä–∞—Ñ–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `buildGraphFromDataset(dataset: TransportDataset)`
- –†–∞–±–æ—Ç–∞ —Å —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

#### Diagnostics
**–†–æ–ª—å:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
**–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:**
- Endpoint `/api/v1/diagnostics/data-loader`
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ–∂–∏–º–µ —Ä–∞–±–æ—Ç—ã
- –û—Ç—á—ë—Ç—ã –æ –∫–∞—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö
- –°—Ç–∞—Ç—É—Å –∫–µ—à–∞ –∏ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

---

### 3. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö ‚úÖ

```typescript
interface ITransportDataset {
  // –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  routes: IRoute[];              // –ú–∞—Ä—à—Ä—É—Ç—ã
  stops: IStop[];                // –û—Å—Ç–∞–Ω–æ–≤–∫–∏
  flights: IFlight[];            // –†–µ–π—Å—ã
  schedules: ISchedule[];        // –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
  tariffs: ITariff[];            // –¢–∞—Ä–∏—Ñ—ã
  
  // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  sourceMode: DataSourceMode;    // REAL | RECOVERY | MOCK
  loadedAt: Date;                // –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
  qualityReport: IDataQualityReport; // –û—Ç—á—ë—Ç –æ –∫–∞—á–µ—Å—Ç–≤–µ
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- RouteGraphBuilder —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –µ–¥–∏–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- PathFinder –Ω–µ –∑–Ω–∞–µ—Ç –æ—Ç–∫—É–¥–∞ –¥–∞–Ω–Ω—ã–µ (OData, Mock, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ)
- RiskEngine –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –£–ø—Ä–æ—â–∞–µ—Ç—Å—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–ø–æ–¥–º–µ–Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö)

---

### 4. –ê–ª–≥–æ—Ä–∏—Ç–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è ‚úÖ

#### –ê–ª–≥–æ—Ä–∏—Ç–º 1: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –æ—Å—Ç–∞–Ω–æ–≤–æ–∫

**–ú–µ—Ç–æ–¥ 1: –ü–æ–∏—Å–∫ –≤ –∫–µ—à–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**
```
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ –∫–ª—é—á—É: stopName + cityName
–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –≤–µ—Ä–Ω—É—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
```

**–ú–µ—Ç–æ–¥ 2: –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏**
```
1. –ù–∞–π—Ç–∏ –º–∞—Ä—à—Ä—É—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —ç—Ç—É –æ—Å—Ç–∞–Ω–æ–≤–∫—É
2. –ù–∞–π—Ç–∏ —Å–æ—Å–µ–¥–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
3. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∞—è –∏ —Å–ª–µ–¥—É—é—â–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞:
   lat = (prevLat + nextLat) / 2
   lon = (prevLon + nextLon) / 2
4. –í–µ—Ä–Ω—É—Ç—å –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
```

**–ú–µ—Ç–æ–¥ 3: –ü–∞—Ä—Å–∏–Ω–≥ –∞–¥—Ä–µ—Å–∞**
```
–ï—Å–ª–∏ stop.–ê–¥—Ä–µ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ä–æ–¥:
  –ò–∑–≤–ª–µ—á—å –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
  –í–µ—Ä–Ω—É—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞ –≥–æ—Ä–æ–¥–∞
```

**–ú–µ—Ç–æ–¥ 4: Fallback –Ω–∞ —Ü–µ–Ω—Ç—Ä —Ä–µ–≥–∏–æ–Ω–∞**
```
–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ–≥–∏–æ–Ω:
  "–Ø–∫—É—Ç—Å–∫" ‚Üí [62.0355, 129.6755]
  "–ú–æ—Å–∫–≤–∞" ‚Üí [55.7558, 37.6173]
  –ò–Ω–∞—á–µ ‚Üí [62.0, 129.0] (—Ü–µ–Ω—Ç—Ä –Ø–∫—É—Ç–∏–∏)
```

#### –ê–ª–≥–æ—Ä–∏—Ç–º 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Ä–µ–π—Å–æ–≤

**–®–∞–≥ 1: –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ –ø–æ —Ç–∏–ø—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞**
```
Airplane:
  - –ß–∞—Å—Ç–æ—Ç–∞: 2 —Ä–µ–π—Å–∞/–¥–µ–Ω—å
  - –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è: 08:00-10:00, 16:00-18:00
  - –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 120 –º–∏–Ω—É—Ç
  - –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω: 5000-15000 —Ä—É–±.

Bus:
  - –ß–∞—Å—Ç–æ—Ç–∞: 4 —Ä–µ–π—Å–∞/–¥–µ–Ω—å
  - –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è: 06:00-08:00, 10:00-12:00, 14:00-16:00, 18:00-20:00
  - –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 240 –º–∏–Ω—É—Ç
  - –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω: 1000-3000 —Ä—É–±.

Train:
  - –ß–∞—Å—Ç–æ—Ç–∞: 3 —Ä–µ–π—Å–∞/–¥–µ–Ω—å
  - –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è: 07:00-09:00, 13:00-15:00, 19:00-21:00
  - –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 180 –º–∏–Ω—É—Ç
  - –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω: 2000-8000 —Ä—É–±.
```

**–®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–π—Å–æ–≤**
```
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è (–æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã + 30 –¥–Ω–µ–π):
  –ï—Å–ª–∏ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –≤ operatingDays:
    –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞:
      –°–æ–∑–¥–∞—Ç—å —Ä–µ–π—Å:
        - departureTime = —Å–ª—É—á–∞–π–Ω–æ–µ –≤—Ä–µ–º—è –≤ –æ–∫–Ω–µ
        - arrivalTime = departureTime + avgDuration
        - price = —Å–ª—É—á–∞–π–Ω–∞—è —Ü–µ–Ω–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
        - seats = —Å–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç
```

#### –ê–ª–≥–æ—Ä–∏—Ç–º 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤

**–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞:**
```
finalPrice = basePrice + (distance √ó pricePerKm) √ó classMultiplier

basePrice (–ø–æ —Ç–∏–ø—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞):
  - airplane: 3000
  - train: 1500
  - bus: 500

pricePerKm (–ø–æ —Ç–∏–ø—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞):
  - airplane: 3.0
  - train: 1.5
  - bus: 0.8

classMultiplier (–ø–æ –∫–ª–∞—Å—Å—É –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è):
  - –≠–∫–æ–Ω–æ–º: 1.0
  - –ö–æ–º—Ñ–æ—Ä—Ç: 1.5
  - –ë–∏–∑–Ω–µ—Å: 2.5
```

**–†–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è:**
```
Haversine formula:
  R = 6371 –∫–º (—Ä–∞–¥–∏—É—Å –ó–µ–º–ª–∏)
  dLat = (lat2 - lat1) √ó œÄ/180
  dLon = (lon2 - lon1) √ó œÄ/180
  a = sin¬≤(dLat/2) + cos(lat1) √ó cos(lat2) √ó sin¬≤(dLon/2)
  c = 2 √ó atan2(‚àöa, ‚àö(1-a))
  distance = R √ó c
```

#### –ê–ª–≥–æ—Ä–∏—Ç–º 4: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Å–∞–¥–æ–∫

**–®–∞–≥ 1: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –æ—Å—Ç–∞–Ω–æ–≤–æ–∫ –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º**
```
stopToRoutes = Map<stopId, Set<routeId>>

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞:
  –î–ª—è –∫–∞–∂–¥–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ:
    stopToRoutes[stopId].add(routeId)
```

**–®–∞–≥ 2: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–µ—Ä–µ—Å–∞–¥–æ–∫**
```
–î–ª—è –∫–∞–∂–¥–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:
  –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ >= 2:
    –î–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤:
      –°–æ–∑–¥–∞—Ç—å —Ä–µ–±—Ä–æ –ø–µ—Ä–µ—Å–∞–¥–∫–∏:
        - fromRouteId = –º–∞—Ä—à—Ä—É—Ç A
        - toRouteId = –º–∞—Ä—à—Ä—É—Ç B
        - transferStopId = –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
        - duration = estimateTransferTime(–æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
```

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–µ—Å–∞–¥–∫–∏:**
```
–ï—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ = –∞—ç—Ä–æ–ø–æ—Ä—Ç ‚Üí 60 –º–∏–Ω—É—Ç
–ï—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ = –≤–æ–∫–∑–∞–ª ‚Üí 30 –º–∏–Ω—É—Ç
–ò–Ω–∞—á–µ ‚Üí 15 –º–∏–Ω—É—Ç
```

---

### 5. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ ‚úÖ

#### –¢–∞–±–ª–∏—Ü–∞ —Ä–µ—à–µ–Ω–∏–π

| –£—Å–ª–æ–≤–∏–µ | –ö–∞—á–µ—Å—Ç–≤–æ | –†–µ–∂–∏–º | –î–µ–π—Å—Ç–≤–∏—è |
|---------|----------|-------|----------|
| OData –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ | - | MOCK | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSON mock-–¥–∞–Ω–Ω—ã–µ |
| OData –ø—É—Å—Ç–∞ | 0 | MOCK | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSON mock-–¥–∞–Ω–Ω—ã–µ |
| OData timeout | - | MOCK | Fallback –Ω–∞ mock-–¥–∞–Ω–Ω—ã–µ |
| –î–∞–Ω–Ω—ã–µ –æ—Ç–ª–∏—á–Ω—ã–µ | >= 90 | REAL | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| –î–∞–Ω–Ω—ã–µ —Ö–æ—Ä–æ—à–∏–µ | 70-89 | RECOVERY | –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ |
| –î–∞–Ω–Ω—ã–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ | 50-69 | RECOVERY | –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ |
| –î–∞–Ω–Ω—ã–µ –ø–ª–æ—Ö–∏–µ | < 50 | MOCK | –ö–∞—á–µ—Å—Ç–≤–æ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–æ–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mock |

#### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ –∫–∞—á–µ—Å—Ç–≤–∞

```typescript
overallScore = 
  routes √ó 0.25 +        // –ö—Ä–∏—Ç–∏—á–Ω–æ
  stops √ó 0.25 +         // –ö—Ä–∏—Ç–∏—á–Ω–æ
  coordinates √ó 0.15 +   // –í–∞–∂–Ω–æ
  schedules √ó 0.15 +     // –í–∞–∂–Ω–æ
  tariffs √ó 0.10 +       // –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ
  transfers √ó 0.10;      // –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ
```

**–û—Ü–µ–Ω–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**

```typescript
// –û—Ü–µ–Ω–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (0-100)
routesScore = (validRoutes / totalRoutes) √ó 100
validRoute = route.Ref_Key && route.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ && route.–¢–∏–ø–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

// –û—Ü–µ–Ω–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–æ–∫ (0-100)
stopsScore = (validStops / totalStops) √ó 100
validStop = stop.Ref_Key && (stop.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ || stop.–ö–æ–¥)

// –û—Ü–µ–Ω–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (0-100)
coordinatesScore = (stopsWithValidCoordinates / totalStops) √ó 100
validCoordinates = lat !== 0 && lon !== 0 && |lat| <= 90 && |lon| <= 180

// –û—Ü–µ–Ω–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (0-100)
schedulesScore = (routesWithSchedule / totalRoutes) √ó 100

// –û—Ü–µ–Ω–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ (0-100)
tariffsScore = (routesWithTariffs / totalRoutes) √ó 100

// –û—Ü–µ–Ω–∫–∞ –ø–µ—Ä–µ—Å–∞–¥–æ–∫ (0-100)
transfersScore = (actualIntersections / maxPossibleIntersections) √ó 100
```

#### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è

```
FUNCTION determineMode(odataAvailable, qualityScore):
  IF NOT odataAvailable:
    RETURN MOCK
  
  IF qualityScore >= 90:
    RETURN REAL
  
  IF qualityScore >= 50 AND qualityScore < 90:
    RETURN RECOVERY
  
  IF qualityScore < 50:
    LOG WARNING "Quality too low, switching to MOCK"
    RETURN MOCK
```

---

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Clean Architecture ‚úÖ

#### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**1. –ü—Ä–∞–≤–∏–ª–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–æ–±–ª—é–¥–µ–Ω–æ:**
```
Presentation ‚Üí Application ‚Üí Domain
Infrastructure ‚Üí Application ‚Üí Domain
```

**2. –ò–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- `BuildRouteUseCase` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `IDataLoader` (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ Domain)
- `AdaptiveDataLoader` —Ä–µ–∞–ª–∏–∑—É–µ—Ç `IDataLoader` (Application Layer)
- `RealDataStrategy`, `MockDataStrategy` —Ä–µ–∞–ª–∏–∑—É—é—Ç `IDataSourceStrategy` (Infrastructure)

**3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–¥–µ:**

```typescript
// BEFORE: BuildRouteUseCase
constructor(
  private routeGraphBuilder: RouteGraphBuilder
) {}

async execute(params) {
  const graph = await this.routeGraphBuilder.buildGraph();
  // ... rest of logic
}

// AFTER: BuildRouteUseCase
constructor(
  private dataLoader: IDataLoader,          // NEW: dependency injection
  private routeGraphBuilder: RouteGraphBuilder
) {}

async execute(params) {
  const dataset = await this.dataLoader.loadTransportData(); // NEW
  const graph = await this.routeGraphBuilder.buildGraphFromDataset(dataset); // MODIFIED
  
  // Existing logic unchanged
  const paths = this.pathFinder.findPath(graph, params.from, params.to);
  const risk = this.riskEngine.assessRisk(paths);
  
  return {
    routes: paths,
    riskAssessment: risk,
    dataLoadingMode: dataset.sourceMode,      // NEW
    dataQualityScore: dataset.qualityReport.overallScore // NEW
  };
}
```

**4. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**

–°–æ–∑–¥–∞–Ω –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞:
```typescript
export class LegacyRouteGraphBuilderAdapter extends RouteGraphBuilder {
  constructor(
    private dataLoader: IDataLoader,
    private actualBuilder: RouteGraphBuilder
  ) {
    super();
  }
  
  async buildGraph(): Promise<RouteGraph> {
    const dataset = await this.dataLoader.loadTransportData();
    return this.actualBuilder.buildGraphFromDataset(dataset);
  }
}
```

**5. –ù–µ–∏–∑–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

‚úÖ **RouteGraph** - –≥—Ä–∞—Ñ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚úÖ **PathFinder** - –∞–ª–≥–æ—Ä–∏—Ç–º Dijkstra
‚úÖ **RiskEngine** - –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚úÖ **RouteNode, RouteEdge** - —Å—É—â–Ω–æ—Å—Ç–∏ –≥—Ä–∞—Ñ–∞
‚úÖ **BuiltRoute** - —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –º–∞—Ä—à—Ä—É—Ç

---

### 7. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö ‚úÖ

#### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤

```
1. USER REQUEST
   ‚îî‚Üí GET /api/v1/routes/search?from=Yakutsk&to=Moscow&date=2025-03-01

2. CONTROLLER
   ‚îî‚Üí RouteBuilderController.searchRoute()

3. USE CASE
   ‚îî‚Üí BuildRouteUseCase.execute(params)

4. DATA LOADING
   ‚îú‚Üí dataLoader.loadTransportData()
   ‚îÇ  ‚îú‚Üí [1] Check Redis cache
   ‚îÇ  ‚îÇ    ‚îî‚Üí Cache miss
   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îú‚Üí [2] Select strategy by priority
   ‚îÇ  ‚îÇ    ‚îú‚Üí RealDataStrategy (priority: 1)
   ‚îÇ  ‚îÇ    ‚îî‚Üí MockDataStrategy (priority: 3)
   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îú‚Üí [3] Check availability
   ‚îÇ  ‚îÇ    ‚îî‚Üí RealDataStrategy.isAvailable()
   ‚îÇ  ‚îÇ        ‚îî‚Üí OData API test ‚Üí true
   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îú‚Üí [4] Load data
   ‚îÇ  ‚îÇ    ‚îî‚Üí RealDataStrategy.loadData()
   ‚îÇ  ‚îÇ        ‚îú‚Üí routesService.getAllRoutes()
   ‚îÇ  ‚îÇ        ‚îú‚Üí stopsService.getAllStops()
   ‚îÇ  ‚îÇ        ‚îú‚Üí flightsService.getAllFlights()
   ‚îÇ  ‚îÇ        ‚îú‚Üí scheduleService.getAllSchedules()
   ‚îÇ  ‚îÇ        ‚îî‚Üí tariffsService.getAllTariffs()
   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îú‚Üí [5] Validate quality
   ‚îÇ  ‚îÇ    ‚îî‚Üí DataQualityValidator.validate(dataset)
   ‚îÇ  ‚îÇ        ‚îú‚Üí evaluateRoutes() ‚Üí 95%
   ‚îÇ  ‚îÇ        ‚îú‚Üí evaluateStops() ‚Üí 90%
   ‚îÇ  ‚îÇ        ‚îú‚Üí evaluateCoordinates() ‚Üí 60%
   ‚îÇ  ‚îÇ        ‚îú‚Üí evaluateSchedules() ‚Üí 70%
   ‚îÇ  ‚îÇ        ‚îú‚Üí evaluateTariffs() ‚Üí 80%
   ‚îÇ  ‚îÇ        ‚îî‚Üí evaluateTransfers() ‚Üí 55%
   ‚îÇ  ‚îÇ        ‚îî‚Üí overallScore = 75
   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îú‚Üí [6] Determine mode
   ‚îÇ  ‚îÇ    ‚îî‚Üí score = 75 ‚Üí MODE = RECOVERY
   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îú‚Üí [7] Apply recovery
   ‚îÇ  ‚îÇ    ‚îî‚Üí RecoveryEngine.apply(dataset, report)
   ‚îÇ  ‚îÇ        ‚îú‚Üí recoverCoordinates() ‚Üí 45 stops
   ‚îÇ  ‚îÇ        ‚îú‚Üí recoverSchedule() ‚Üí 12 routes
   ‚îÇ  ‚îÇ        ‚îú‚Üí recoverTariffs() ‚Üí 8 routes
   ‚îÇ  ‚îÇ        ‚îî‚Üí recoverTransfers() ‚Üí 23 edges
   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îú‚Üí [8] Cache result
   ‚îÇ  ‚îÇ    ‚îî‚Üí Redis.set('transport-dataset', dataset, TTL=3600)
   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îî‚Üí [9] Return TransportDataset
   ‚îÇ       ‚îú‚Üí sourceMode: RECOVERY
   ‚îÇ       ‚îú‚Üí qualityReport: {...}
   ‚îÇ       ‚îî‚Üí loadedAt: 2025-01-15T10:30:00Z

5. GRAPH BUILDING
   ‚îî‚Üí routeGraphBuilder.buildGraphFromDataset(dataset)
       ‚îú‚Üí Create nodes from stops
       ‚îú‚Üí Create edges from routes + flights + tariffs
       ‚îî‚Üí Return RouteGraph

6. PATH FINDING
   ‚îî‚Üí pathFinder.findPath(graph, "Yakutsk", "Moscow")
       ‚îî‚Üí Dijkstra algorithm
           ‚îî‚Üí Return optimal paths

7. RISK ASSESSMENT
   ‚îî‚Üí riskEngine.assessRisk(paths)
       ‚îî‚Üí Return risk scores

8. RESPONSE
   ‚îî‚Üí {
       routes: [...],
       alternatives: [...],
       riskAssessment: {...},
       dataLoadingMode: "recovery",      // NEW
       dataQualityScore: 75              // NEW
     }
```

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å (cache miss):**
  - OData –∑–∞–≥—Ä—É–∑–∫–∞: 2-3 —Å–µ–∫—É–Ω–¥—ã
  - –í–∞–ª–∏–¥–∞—Ü–∏—è: 100-200 –º—Å
  - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: 1-2 —Å–µ–∫—É–Ω–¥—ã
  - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞: 500-800 –º—Å
  - –ü–æ–∏—Å–∫ –ø—É—Ç–∏: 100-300 –º—Å
  - **–ò—Ç–æ–≥–æ: 4-6 —Å–µ–∫—É–Ω–¥**

- **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã (cache hit):**
  - –ß—Ç–µ–Ω–∏–µ –∏–∑ Redis: 10-50 –º—Å
  - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞: 500-800 –º—Å
  - –ü–æ–∏—Å–∫ –ø—É—Ç–∏: 100-300 –º—Å
  - **–ò—Ç–æ–≥–æ: 600-1150 –º—Å**

---

### 8. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã ‚úÖ

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä: REST API –∏—Å—Ç–æ—á–Ω–∏–∫**

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
export class RestApiDataStrategy implements IDataSourceStrategy {
  readonly name = 'rest_api' as DataSourceMode;
  
  constructor(
    private httpClient: HttpClient,
    private config: RestApiConfig
  ) {}
  
  async isAvailable(): Promise<boolean> {
    try {
      const response = await this.httpClient.get(this.config.healthUrl);
      return response.status === 200;
    } catch {
      return false;
    }
  }
  
  async loadData(): Promise<TransportDataset> {
    const [routes, stops, flights] = await Promise.all([
      this.httpClient.get(`${this.config.baseUrl}/routes`),
      this.httpClient.get(`${this.config.baseUrl}/stops`),
      this.httpClient.get(`${this.config.baseUrl}/flights`),
    ]);
    
    return {
      routes: routes.data,
      stops: stops.data,
      flights: flights.data,
      schedules: [],
      tariffs: [],
      sourceMode: 'rest_api' as DataSourceMode,
      loadedAt: new Date(),
      qualityReport: null!,
    };
  }
  
  getPriority(): number {
    return 2; // –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–µ–∂–¥—É OData –∏ Mock
  }
}

// 2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
const strategies = [
  new RealDataStrategy(...),      // Priority: 1
  new RestApiDataStrategy(...),   // Priority: 2 (NEW)
  new MockDataStrategy(...),      // Priority: 3
];

const dataLoader = new AdaptiveDataLoader(strategies, ...);

// 3. –ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø—Ä–æ–±—É–µ—Ç –Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä: ML-based –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π recovery service
export class MLCoordinateRecoveryService {
  constructor(
    private mlModel: CoordinatePredictionModel
  ) {}
  
  async recover(stops: IStop[]): Promise<IStop[]> {
    const stopsWithoutCoords = stops.filter(s => !this.hasValidCoordinates(s));
    
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ML –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
    const predictions = await this.mlModel.predict({
      names: stopsWithoutCoords.map(s => s.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ),
      addresses: stopsWithoutCoords.map(s => s.–ê–¥—Ä–µ—Å),
      context: this.buildContext(stops),
    });
    
    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
    return stopsWithoutCoords.map((stop, idx) => ({
      ...stop,
      –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: predictions[idx],
      _recovered: true,
      _recoveryMethod: 'ml_prediction',
    }));
  }
}

// 2. –û–±–Ω–æ–≤–∏—Ç—å RecoveryEngine
export class RecoveryEngine implements IDataRecoveryEngine {
  constructor(
    private basicCoordRecovery: CoordinateRecoveryService,
    private mlCoordRecovery: MLCoordinateRecoveryService, // NEW
  ) {}
  
  async recoverCoordinates(stops, routes): Promise<IStop[]> {
    // –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å ML-–º–µ—Ç–æ–¥
    const mlRecovered = await this.mlCoordRecovery.recover(stops);
    
    // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π –º–µ—Ç–æ–¥
    const remaining = mlRecovered.filter(s => !s._recovered);
    const basicRecovered = await this.basicCoordRecovery.recover(remaining);
    
    return [...mlRecovered.filter(s => s._recovered), ...basicRecovered];
  }
}

// 3. –ì–æ—Ç–æ–≤–æ! ML-–∞–ª–≥–æ—Ä–∏—Ç–º –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫—Ä–∏—Ç–µ—Ä–∏—è –∫–∞—á–µ—Å—Ç–≤–∞

**–ü—Ä–∏–º–µ—Ä: Real-time data freshness**

```typescript
export class DataQualityValidator implements IDataQualityValidator {
  validate(dataset: TransportDataset): DataQualityReport {
    const scores = {
      routes: this.evaluateRoutes(dataset.routes),
      stops: this.evaluateStops(dataset.stops),
      coordinates: this.evaluateCoordinates(dataset.stops),
      schedules: this.evaluateSchedules(dataset.schedules, dataset.routes),
      tariffs: this.evaluateTariffs(dataset.tariffs, dataset.routes),
      transfers: this.evaluateTransfers(dataset.stops, dataset.routes),
      freshness: this.evaluateFreshness(dataset), // NEW CRITERION
    };
    
    // –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Å–∞ —Å —É—á—ë—Ç–æ–º –Ω–æ–≤–æ–≥–æ –∫—Ä–∏—Ç–µ—Ä–∏—è
    const overallScore = 
      scores.routes * 0.20 +
      scores.stops * 0.20 +
      scores.coordinates * 0.15 +
      scores.schedules * 0.15 +
      scores.tariffs * 0.10 +
      scores.transfers * 0.10 +
      scores.freshness * 0.10; // NEW WEIGHT
    
    return {
      overallScore: Math.round(overallScore),
      scores,
      issues: this.collectIssues(dataset, scores),
      recommendations: this.generateRecommendations(scores),
      requiresRecovery: overallScore < 70,
    };
  }
  
  private evaluateFreshness(dataset: TransportDataset): number {
    const now = Date.now();
    const loadedAt = dataset.loadedAt.getTime();
    const ageMinutes = (now - loadedAt) / 60000;
    
    if (ageMinutes < 5) return 100;   // –û—á–µ–Ω—å —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
    if (ageMinutes < 30) return 80;   // –°–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
    if (ageMinutes < 60) return 60;   // –ü—Ä–∏–µ–º–ª–µ–º–æ
    return 40;                        // –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ
  }
}
```

---

### 9. –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è ‚úÖ

#### –†–∏—Å–∫–∏

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ñ–ª–∞–≥–æ–º `_recovered`, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis, TTL=1—á), –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω—è—è | –Ø–≤–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞ –≤ API, warning –Ω–∞ frontend, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ |
| –ü—Ä–æ–±–ª–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –ø–æ—ç—Ç–∞–ø–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è, integration —Ç–µ—Å—Ç—ã |
| –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –í—ã–¥–µ–ª–∏—Ç—å 3-5 –¥–Ω–µ–π –Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–∫—Ä—ã—Ç–∏–µ >= 80%, manual testing |

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**1. –¢–æ—á–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å 1-5 –∫–º
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: —à–∞–±–ª–æ–Ω—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–π—Å—ã
- –¢–∞—Ä–∏—Ñ—ã: –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç
- –ü–µ—Ä–µ—Å–∞–¥–∫–∏: –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏

**2. –ü–æ–∫—Ä—ã—Ç–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –ù–µ –≤—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è
- –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É–ø—É—â–µ–Ω—ã
- –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –∏ —Å–æ–±—ã—Ç–∏—è –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è

**3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: 5-10 —Å–µ–∫—É–Ω–¥
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ >1000 –º–∞—Ä—à—Ä—É—Ç–æ–≤: –º–µ–¥–ª–µ–Ω–Ω–æ
- –ö–µ—à –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è production

#### –°–ª–æ–∂–Ω–æ—Å—Ç–∏

**1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ `BuildRouteUseCase` –∏ `RouteGraphBuilder`
- –†–∏—Å–∫ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ê–¥–∞–ø—Ç–µ—Ä—ã, –ø–æ—ç—Ç–∞–ø–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è, —Ç–µ—Å—Ç—ã

**2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è:**
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤
- **–†–µ—à–µ–Ω–∏–µ:** –ú–æ–∫–∏ –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞:**
- –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –ø—Ä–∏—á–∏–Ω—É –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞
- **–†–µ—à–µ–Ω–∏–µ:** Diagnostics endpoint, —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏

---

### 10. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚úÖ

```
backend/src/
‚îú‚îÄ‚îÄ domain/                              # Domain Layer
‚îÇ   ‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransportDataset.ts          [NEW]
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DataQualityReport.ts         [NEW]
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecoveryAction.ts            [NEW]
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DataSourceMode.ts            [NEW]
‚îÇ   ‚îî‚îÄ‚îÄ repositories/
‚îÇ       ‚îú‚îÄ‚îÄ IDataLoader.ts               [NEW]
‚îÇ       ‚îú‚îÄ‚îÄ IDataRecoveryEngine.ts       [NEW]
‚îÇ       ‚îú‚îÄ‚îÄ IDataQualityValidator.ts     [NEW]
‚îÇ       ‚îî‚îÄ‚îÄ IDataSourceStrategy.ts       [NEW]
‚îÇ
‚îú‚îÄ‚îÄ application/                         # Application Layer
‚îÇ   ‚îú‚îÄ‚îÄ data-loading/                    [NEW FOLDER]
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdaptiveDataLoader.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DataQualityValidator.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecoveryEngine.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LoadTransportDataUseCase.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ route-builder/                   [EXISTING - MODIFIED]
‚îÇ       ‚îú‚îÄ‚îÄ BuildRouteUseCase.ts         [MODIFIED: add IDataLoader dependency]
‚îÇ       ‚îú‚îÄ‚îÄ RouteGraphBuilder.ts         [MODIFIED: new method buildGraphFromDataset]
‚îÇ       ‚îú‚îÄ‚îÄ RouteGraph.ts                [UNCHANGED]
‚îÇ       ‚îú‚îÄ‚îÄ PathFinder.ts                [UNCHANGED]
‚îÇ       ‚îî‚îÄ‚îÄ RouteBuilder.ts              [UNCHANGED]
‚îÇ
‚îî‚îÄ‚îÄ infrastructure/                      # Infrastructure Layer
    ‚îú‚îÄ‚îÄ data-loading/                    [NEW FOLDER]
    ‚îÇ   ‚îú‚îÄ‚îÄ strategies/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RealDataStrategy.ts
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MockDataStrategy.ts
    ‚îÇ   ‚îÇ
    ‚îÇ   ‚îî‚îÄ‚îÄ recovery/
    ‚îÇ       ‚îú‚îÄ‚îÄ CoordinateRecoveryService.ts
    ‚îÇ       ‚îú‚îÄ‚îÄ ScheduleRecoveryService.ts
    ‚îÇ       ‚îú‚îÄ‚îÄ TariffRecoveryService.ts
    ‚îÇ       ‚îî‚îÄ‚îÄ TransferRecoveryService.ts
    ‚îÇ
    ‚îî‚îÄ‚îÄ api/                             [EXISTING - UNCHANGED]
        ‚îî‚îÄ‚îÄ odata-client/
            ‚îî‚îÄ‚îÄ ...
```

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –î–æ–∫—É–º–µ–Ω—Ç | –†–∞–∑–¥–µ–ª |
|------------|--------|----------|--------|
| –ö–ª—é—á–µ–≤—ã–µ –±–ª–æ–∫–∏ —Å–∏—Å—Ç–µ–º—ã | ‚úÖ | architecture.md | ¬ß2, ¬ß3 |
| –†–æ–ª–∏ –º–æ–¥—É–ª–µ–π | ‚úÖ | architecture.md | ¬ß3, summary.md | ¬ß2 |
| –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö | ‚úÖ | architecture.md | ¬ß4, summary.md | ¬ß3 |
| –ê–ª–≥–æ—Ä–∏—Ç–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è | ‚úÖ | architecture.md | ¬ß3.2.3, summary.md | ¬ß4 |
| –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ | ‚úÖ | architecture.md | ¬ß7, summary.md | ¬ß5 |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Clean Architecture | ‚úÖ | architecture.md | ¬ß5, summary.md | ¬ß6 |
| –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–≥—Ä—É–∑–∫–∏ | ‚úÖ | architecture.md | ¬ß6, diagrams.md | ¬ß5, summary.md | ¬ß7 |
| –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã | ‚úÖ | architecture.md | ¬ß8, summary.md | ¬ß8 |
| –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | ‚úÖ | architecture.md | ¬ß10, summary.md | ¬ß9 |

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ **–ü–æ–ª–Ω–æ—Ç–∞:** –í—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Å–∏—Å—Ç–µ–º—ã –æ–ø–∏—Å–∞–Ω—ã
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ—Å—Ç—å:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- ‚úÖ **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** 12 –¥–∏–∞–≥—Ä–∞–º–º (Mermaid)
- ‚úÖ **–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å:** –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å —á–µ–∫–ª–∏—Å—Ç–∞–º–∏
- ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —á–∏—Å—Ç–æ—Ç–∞:** Clean Architecture —Å–æ–±–ª—é–¥–µ–Ω–∞
- ‚úÖ **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã:** –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –≤–æ –≤—Å–µ—Ö —Å–ª–æ—è—Ö
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

---

## üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –û–±—ä—ë–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä:** 146 KB
- **–í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫:** 3692
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–¥–µ–ª–æ–≤:** 40+
- **–î–∏–∞–≥—Ä–∞–º–º:** 12
- **–ü—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞:** 50+

### –û—Ö–≤–∞—Ç —Ç–µ–º—ã
- **–°–ª–æ–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:** 3 (Domain, Application, Infrastructure)
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:** 4 (IDataLoader, IDataRecoveryEngine, IDataQualityValidator, IDataSourceStrategy)
- **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏:** 2+ (Real, Mock, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ)
- **Recovery Services:** 4 (Coordinate, Schedule, Tariff, Transfer)
- **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:** 3 (REAL, RECOVERY, MOCK)
- **–ê–ª–≥–æ—Ä–∏—Ç–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:** 4 –¥–µ—Ç–∞–ª—å–Ω—ã—Ö
- **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞:** 6 (routes, stops, coordinates, schedules, tariffs, transfers)

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å
- **–§–∞–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** 10
- **–ß–µ–∫–ª–∏—Å—Ç–æ–≤:** 100+
- **–û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç:** 19-30 –¥–Ω–µ–π
- **–¢–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:** 30+
- **–ö—Ä–∏—Ç–µ—Ä–∏–µ–≤ —É—Å–ø–µ—Ö–∞:** 15+

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ (—Å–µ–π—á–∞—Å)
1. ‚úÖ –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
3. ‚úÖ –ó–∞–¥–∞—Ç—å —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏)
1. ‚è≥ –ù–∞—á–∞—Ç—å –§–∞–∑—É 1: Domain Layer (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Å—É—â–Ω–æ—Å—Ç–∏)
2. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. ‚è≥ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –Ω–µ–¥–µ–ª—å)
1. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ 10 —Ñ–∞–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
2. ‚è≥ –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. ‚è≥ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ staging

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (2-3 –º–µ—Å—è—Ü–∞)
1. ‚è≥ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ production
2. ‚è≥ –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ feedback
3. ‚è≥ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞
4. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å ML-based –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

---

## üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

### –û—Å–Ω–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
üëâ **`adaptive-data-loader-architecture.md`**
- –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Å—É—â–Ω–æ—Å—Ç–∏
- –ê–ª–≥–æ—Ä–∏—Ç–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
üëâ **`adaptive-data-loader-diagrams.md`**
- High-level –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- Sequence diagrams
- Class diagrams
- Data flow diagrams

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
üëâ **`adaptive-data-loader-implementation-plan.md`**
- 10 —Ñ–∞–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —á–µ–∫–ª–∏—Å—Ç—ã
- –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç
- –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
üëâ **`adaptive-data-loader-summary.md`** (—ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç)
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞.**

–°–∏—Å—Ç–µ–º–∞:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç—Ä—ë—Ö —Ä–µ–∂–∏–º–∞—Ö (REAL, RECOVERY, MOCK)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –°–æ–±–ª—é–¥–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—ã Clean Architecture
- ‚úÖ –ù–µ –Ω–∞—Ä—É—à–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- üìê –ü–æ–ª–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –≤—Å–µ—Ö —Å–ª–æ—ë–≤
- üé® 12 –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –¥–∏–∞–≥—Ä–∞–º–º
- üìã –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å —á–µ–∫–ª–∏—Å—Ç–∞–º–∏
- üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –ø—Å–µ–≤–¥–æ–∫–æ–¥
- üîç –ê–ª–≥–æ—Ä–∏—Ç–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —É—Å–ø–µ—Ö–∞

**–ì–æ—Ç–æ–≤–æ –∫:**
- ‚úÖ Code review –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –ù–∞—á–∞–ª—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –û–±—Å—É–∂–¥–µ–Ω–∏—é —Å –∫–æ–º–∞–Ω–¥–æ–π
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é —Å–ø—Ä–∏–Ω—Ç–æ–≤

---

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä:** AI Assistant (Claude Sonnet 4.5)  
**–î–∞—Ç–∞:** 18 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0 (Final)


