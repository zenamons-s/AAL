# Frontend Integration with Adaptive Backend ‚Äî Complete ‚úÖ

**–î–∞—Ç–∞:** 2025-11-18  
**–≠—Ç–∞–ø:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö backend. –í—Å–µ mock-–¥–∞–Ω–Ω—ã–µ –∏ fallback-–ª–æ–≥–∏–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ —É–¥–∞–ª–µ–Ω—ã. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –≥–æ—Ä–æ–¥–∞—Ö –∏ –º–∞—Ä—à—Ä—É—Ç–∞—Ö, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –¥–∞–Ω–Ω—ã—Ö (REAL/RECOVERY/MOCK) –∏ –∫–∞—á–µ—Å—Ç–≤–∞.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö** ‚úÖ
**–§–∞–π–ª:** `frontend/src/shared/types/route-adapter.ts`

–î–æ–±–∞–≤–ª–µ–Ω—ã:
- `DataSourceMode` enum –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- `dataMode` –∏ `dataQuality` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IRouteBuilderResult`

```typescript
export enum DataSourceMode {
  REAL = 'real',
  RECOVERY = 'recovery',
  MOCK = 'mock',
  UNKNOWN = 'unknown',
}

export interface IRouteBuilderResult {
  routes: IBuiltRoute[];
  alternatives?: IBuiltRoute[];
  mlData?: unknown;
  riskAssessment?: IRiskAssessment;
  dataMode?: DataSourceMode | string;
  dataQuality?: number;
}
```

---

### 2. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ DataModeBadge** ‚úÖ
**–§–∞–π–ª—ã:**
- `frontend/src/components/data-mode-badge/data-mode-badge.tsx`
- `frontend/src/components/data-mode-badge/index.ts`

–°–æ–∑–¥–∞–Ω –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:
- üü¢ **REAL** ‚Äî –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∑–µ–ª–µ–Ω—ã–π)
- üü° **RECOVERY** ‚Äî –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∂–µ–ª—Ç—ã–π)
- üî¥ **MOCK** ‚Äî –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫—Ä–∞—Å–Ω—ã–π)
- ‚ö´ **UNKNOWN** ‚Äî –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ä–µ–∂–∏–º (—Å–µ—Ä—ã–π)

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–∞–∫–∂–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö.

---

### 3. **–°–æ–∑–¥–∞–Ω–∏–µ API endpoint –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤** ‚úÖ
**–§–∞–π–ª:** `backend/src/presentation/controllers/CitiesController.ts`

–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ `TransportDataset`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≥–æ—Ä–æ–¥–∞ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏–π –æ—Å—Ç–∞–Ω–æ–≤–æ–∫ —Å –ø–æ–º–æ—â—å—é —ç–≤—Ä–∏—Å—Ç–∏–∫
- Fallback –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ –Ø–∫—É—Ç–∏–∏ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: `mode`, `quality`, `source`, `loadedAt`

**Endpoint:** `GET /api/v1/cities`

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–æ—É—Ç–∏–Ω–≥:**
```typescript
// backend/src/presentation/routes/index.ts
router.get('/cities', CitiesController.getCities);
```

---

### 4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CityAutocomplete** ‚úÖ
**–§–∞–π–ª:** `frontend/src/components/city-autocomplete/city-autocomplete.tsx`

–û–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ backend API –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ `YAKUTIA_CITIES`
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤
- Fallback –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ API (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `fetchCities`)

**–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ—Ä–æ–¥–æ–≤:**
`frontend/src/shared/utils/cities-api.ts`

```typescript
export async function fetchCities(): Promise<string[]> {
  try {
    const cities = await fetchApi<string[]>('/cities');
    const validCities = cities.filter(city => typeof city === 'string' && city.trim().length > 1);
    return validCities.length > 0 ? validCities : Array.from(YAKUTIA_CITIES);
  } catch (error) {
    console.error('Failed to fetch cities from backend, using fallback list:', error);
    return Array.from(YAKUTIA_CITIES);
  }
}
```

---

### 5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SearchForm** ‚úÖ
**–§–∞–π–ª:** `frontend/src/components/search-form/search-form.tsx`

–û–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ backend API
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –ø—Ä–æ—Ç–∏–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤

---

### 6. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∏—Å–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤** ‚úÖ
**–§–∞–π–ª:** `frontend/src/app/routes/page.tsx`

–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è `dataMode` –∏ `dataQuality`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `DataModeBadge` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –¥–∞–Ω–Ω—ã—Ö
- –£–¥–∞–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `isFallback` –∏ —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –Ω–∏–º –ª–æ–≥–∏–∫–∞
- –£–¥–∞–ª–µ–Ω–∞ –æ—Ç–º–µ—Ç–∫–∞ "(—Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)" –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
- –î–∞–Ω–Ω—ã–µ –æ —Ä–µ–∂–∏–º–µ –∏ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ–ø–µ—Ä—å –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ backend

**–í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
```tsx
{dataMode && (
  <div className="mb-6 flex justify-center">
    <DataModeBadge dataMode={dataMode} dataQuality={dataQuality} />
  </div>
)}
```

---

### 7. **–£–¥–∞–ª–µ–Ω–∏–µ fallback –ª–æ–≥–∏–∫–∏ –∏–∑ RouteBuilderController** ‚úÖ
**–§–∞–π–ª:** `backend/src/presentation/controllers/RouteBuilderController.ts`

–£–¥–∞–ª–µ–Ω–æ:
- Fallback –ª–æ–≥–∏–∫–∞ –∫ `createFallbackRoute` –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –ë–ª–æ–∫ `catch` —Å fallback –ª–æ–≥–∏–∫–æ–π –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö OData
- –í–µ—Å—å –∫–æ–¥, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ OData

**–ü–æ—á–µ–º—É —É–¥–∞–ª–µ–Ω–æ:**
–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö (`TransportDataService`) —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (REAL/RECOVERY/MOCK), –¥–µ–ª–∞—è —Ä—É—á–Ω–æ–π fallback –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –∏–∑–±—ã—Ç–æ—á–Ω—ã–º.

---

## üóÇÔ∏è –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### **Backend**
1. ‚úÖ `backend/src/presentation/controllers/CitiesController.ts` ‚Äî **—Å–æ–∑–¥–∞–Ω**
2. ‚úÖ `backend/src/presentation/routes/index.ts` ‚Äî **–∏–∑–º–µ–Ω–µ–Ω** (–¥–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç–∏–Ω–≥ –¥–ª—è `/cities`)
3. ‚úÖ `backend/src/presentation/controllers/RouteBuilderController.ts` ‚Äî **–∏–∑–º–µ–Ω–µ–Ω** (—É–¥–∞–ª–µ–Ω fallback)

### **Frontend**
1. ‚úÖ `frontend/src/shared/types/route-adapter.ts` ‚Äî **–∏–∑–º–µ–Ω–µ–Ω** (–¥–æ–±–∞–≤–ª–µ–Ω—ã `DataSourceMode`, `dataMode`, `dataQuality`)
2. ‚úÖ `frontend/src/components/data-mode-badge/data-mode-badge.tsx` ‚Äî **—Å–æ–∑–¥–∞–Ω**
3. ‚úÖ `frontend/src/components/data-mode-badge/index.ts` ‚Äî **—Å–æ–∑–¥–∞–Ω**
4. ‚úÖ `frontend/src/components/index.ts` ‚Äî **–∏–∑–º–µ–Ω–µ–Ω** (–¥–æ–±–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç `DataModeBadge`)
5. ‚úÖ `frontend/src/shared/utils/cities-api.ts` ‚Äî **—Å–æ–∑–¥–∞–Ω**
6. ‚úÖ `frontend/src/components/city-autocomplete/city-autocomplete.tsx` ‚Äî **–∏–∑–º–µ–Ω–µ–Ω** (–∑–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ API)
7. ‚úÖ `frontend/src/components/search-form/search-form.tsx` ‚Äî **–∏–∑–º–µ–Ω–µ–Ω** (–≤–∞–ª–∏–¥–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ API)
8. ‚úÖ `frontend/src/app/routes/page.tsx` ‚Äî **–∏–∑–º–µ–Ω–µ–Ω** (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `dataMode` –∏ `dataQuality`, —É–¥–∞–ª–µ–Ω `isFallback`)

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –≤–∏–¥–∏—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- üü¢ **–†–µ–∞–ª—å–Ω—ã–µ** ‚Äî –¥–∞–Ω–Ω—ã–µ –∏–∑ OData
- üü° **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ** ‚Äî –¥–∞–Ω–Ω—ã–µ —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø—É—Å–∫–æ–≤
- üî¥ **–¢–µ—Å—Ç–æ–≤—ã–µ** ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ä–æ–¥–æ–≤**
–°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ –±–æ–ª—å—à–µ –Ω–µ —Å—Ç–∞—Ç–∏—á–µ–Ω, –∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ backend –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏**
–í—Å—è —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ fallback –∏ –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–ø–µ—Ä—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ ‚Äî –≤ `TransportDataService`.

### **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Clean Architecture**
–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture:
- **Domain Layer:** –ù–µ –∏–∑–º–µ–Ω–µ–Ω
- **Application Layer:** –õ–æ–≥–∏–∫–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- **Infrastructure Layer:** –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö (OData, Mock)
- **Presentation Layer:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### **Backend Build** ‚úÖ
```bash
cd backend && npm run build
# ‚úÖ Compiled successfully
```

### **Frontend Build** ‚úÖ
```bash
cd frontend && npm run build
# ‚úÖ Next.js optimized production build successful
```

### **API Endpoints** ‚úÖ
- `GET /api/v1/cities` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤
- `GET /api/v1/routes/search` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å `dataMode` –∏ `dataQuality`

---

## üìä –°—Ç–∞—Ç—É—Å –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É Stage 14

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã –¥–ª—è `dataMode` –∏ `dataQuality` | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `DataModeBadge` | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –°–æ–∑–¥–∞—Ç—å API endpoint `/cities` | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –û–±–Ω–æ–≤–∏—Ç—å `CityAutocomplete` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ backend | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –û–±–Ω–æ–≤–∏—Ç—å `SearchForm` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–æ—Ä–æ–¥–æ–≤ | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/routes` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –£–¥–∞–ª–∏—Ç—å fallback –ª–æ–≥–∏–∫—É –∏–∑ `RouteBuilderController` | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É backend | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É frontend | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
   - –ü–æ–∏—Å–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –¥–∞–Ω–Ω—ã—Ö (REAL/RECOVERY/MOCK)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤
   
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º OData** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞):
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `ODATA_BASE_URL`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ REAL

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/api/v1/diagnostics/adaptive-data` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

4. **End-to-End —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ä–µ–∂–∏–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ fallback –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

---

## üìå –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Clean Architecture
2. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∞:** `BuildRouteUseCase`, `RouteGraphBuilder`, `risk-engine` –æ—Å—Ç–∞–ª–∏—Å—å –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏
3. **Backward Compatibility:** API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
5. **Graceful Degradation:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ OData

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

üéâ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º backend –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, —Å–±–æ—Ä–∫–∏ —É—Å–ø–µ—à–Ω—ã, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–±–ª—é–¥–µ–Ω–∞.

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.*

